
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Kaleidoo utils package">
      
      
        <meta name="author" content="BarLanderK">
      
      
        <link rel="canonical" href="https://BarLanderK.github.io/kal-utils/monitoring/">
      
      
        <link rel="prev" href="../storage/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.40">
    
    
      
        <title>monitoring module - kal-utils</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CRegular:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Google Sans";--md-code-font:"Regular"}</style>
      
    
    
      <link rel="stylesheet" href="../css/timeago.css">
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#monitoring-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="kal-utils" class="md-header__button md-logo" aria-label="kal-utils" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            kal-utils
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              monitoring module
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/BarLanderK/kal-utils" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="kal-utils" class="md-nav__button md-logo" aria-label="kal-utils" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    kal-utils
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/BarLanderK/kal-utils" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/BarLanderK/kal-utils/issues" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Report Issues
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kal_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kal_utils module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    requests module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    logger module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handle_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    handle_response module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mongodb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mongodb module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../time_zone/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    time_zone module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sorts.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sorts module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../helper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    helper module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    storage module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    monitoring module
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    monitoring module
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configmanager" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigManager
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.ConfigManager" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.config_managers.ConfigManager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      get_endpoint()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_exporter_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_exporter_type()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_insecure" class="md-nav__link">
    <span class="md-ellipsis">
      get_insecure()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_service_name" class="md-nav__link">
    <span class="md-ellipsis">
      get_service_name()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_service_name()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#envconfigmanager" class="md-nav__link">
    <span class="md-ellipsis">
      EnvConfigManager
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.config_managers.EnvConfigManager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      get_endpoint()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_exporter_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_exporter_type()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_insecure" class="md-nav__link">
    <span class="md-ellipsis">
      get_insecure()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_service_name" class="md-nav__link">
    <span class="md-ellipsis">
      get_service_name()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_service_name()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#awsconfigmanager" class="md-nav__link">
    <span class="md-ellipsis">
      AWSConfigManager
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.config_managers.AWSConfigManager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      get_endpoint()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_exporter_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_exporter_type()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_insecure" class="md-nav__link">
    <span class="md-ellipsis">
      get_insecure()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_service_name" class="md-nav__link">
    <span class="md-ellipsis">
      get_service_name()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_service_name()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prometheusmetricsdecorator" class="md-nav__link">
    <span class="md-ellipsis">
      PrometheusMetricsDecorator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.add_metrics_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      add_metrics_endpoint()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.consume_time" class="md-nav__link">
    <span class="md-ellipsis">
      consume_time()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.db_time" class="md-nav__link">
    <span class="md-ellipsis">
      db_time()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.handle_exception" class="md-nav__link">
    <span class="md-ellipsis">
      handle_exception()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.instrument" class="md-nav__link">
    <span class="md-ellipsis">
      instrument()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.print_time" class="md-nav__link">
    <span class="md-ellipsis">
      print_time()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.produce_time" class="md-nav__link">
    <span class="md-ellipsis">
      produce_time()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.record_metric" class="md-nav__link">
    <span class="md-ellipsis">
      record_metric()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#locationrequestcounter" class="md-nav__link">
    <span class="md-ellipsis">
      LocationRequestCounter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requestcounter" class="md-nav__link">
    <span class="md-ellipsis">
      RequestCounter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.requestMetrics.RequestCounter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#servererrormetrics" class="md-nav__link">
    <span class="md-ellipsis">
      ServerErrorMetrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requesthist" class="md-nav__link">
    <span class="md-ellipsis">
      RequestHist
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.requestMetrics.RequestHist
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpuusagemonitor" class="md-nav__link">
    <span class="md-ellipsis">
      CpuUsageMonitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memoryusagemonitor" class="md-nav__link">
    <span class="md-ellipsis">
      MemoryUsageMonitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diskusagemonitor" class="md-nav__link">
    <span class="md-ellipsis">
      DiskUsageMonitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#networkusagemonitor" class="md-nav__link">
    <span class="md-ellipsis">
      NetworkUsageMonitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tracingconfig" class="md-nav__link">
    <span class="md-ellipsis">
      TracingConfig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.TracingConfig" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.tracing_manager.TracingConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.TracingConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.TracingConfig.configure_tracing" class="md-nav__link">
    <span class="md-ellipsis">
      configure_tracing()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="configure_tracing()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#otlptracingconfig" class="md-nav__link">
    <span class="md-ellipsis">
      OTLPTracingConfig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.OTLPTracingConfig" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.tracing_manager.OTLPTracingConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.OTLPTracingConfig.configure_tracing" class="md-nav__link">
    <span class="md-ellipsis">
      configure_tracing()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="configure_tracing()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jaegertracingconfig" class="md-nav__link">
    <span class="md-ellipsis">
      JaegerTracingConfig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.JaegerTracingConfig" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.tracing_manager.JaegerTracingConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.JaegerTracingConfig.configure_tracing" class="md-nav__link">
    <span class="md-ellipsis">
      configure_tracing()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#span_with_attributes" class="md-nav__link">
    <span class="md-ellipsis">
      span_with_attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.context_manager.span_with_attributes" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.context_manager.span_with_attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.tempo.context_manager.span_with_attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#span_with_event" class="md-nav__link">
    <span class="md-ellipsis">
      span_with_event
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.context_manager.span_with_event" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.context_manager.span_with_event
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.tempo.context_manager.span_with_event">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_span_attributes" class="md-nav__link">
    <span class="md-ellipsis">
      add_span_attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.decorator_manager.add_span_attributes" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.decorator_manager.add_span_attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.tempo.decorator_manager.add_span_attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_span_event" class="md-nav__link">
    <span class="md-ellipsis">
      add_span_event
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.decorator_manager.add_span_event" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.decorator_manager.add_span_event
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.tempo.decorator_manager.add_span_event">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure_monitor" class="md-nav__link">
    <span class="md-ellipsis">
      configure_monitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_metrics.configure_monitor" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.config_metrics.configure_monitor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.core.config_metrics.configure_monitor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get_enabled_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      get_enabled_metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.metrics.get_enabled_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.metrics.get_enabled_metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.core.metrics.get_enabled_metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get_metrics_classes" class="md-nav__link">
    <span class="md-ellipsis">
      get_metrics_classes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.metrics.get_metrics_classes" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.metrics.get_metrics_classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.core.metrics.get_metrics_classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create_unified_metrics_class" class="md-nav__link">
    <span class="md-ellipsis">
      create_unified_metrics_class
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.unifiedMetrics.create_unified_metrics_class" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.unifiedMetrics.create_unified_metrics_class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.prometheus.unifiedMetrics.create_unified_metrics_class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authenticate" class="md-nav__link">
    <span class="md-ellipsis">
      authenticate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.utils.basic_authentication.authenticate" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.utils.basic_authentication.authenticate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.utils.basic_authentication.authenticate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_parent_directory_to_sys_path" class="md-nav__link">
    <span class="md-ellipsis">
      add_parent_directory_to_sys_path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.utils.relative_imports.add_parent_directory_to_sys_path" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.utils.relative_imports.add_parent_directory_to_sys_path
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configmanager" class="md-nav__link">
    <span class="md-ellipsis">
      ConfigManager
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.ConfigManager" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.config_managers.ConfigManager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      get_endpoint()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_exporter_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_exporter_type()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_insecure" class="md-nav__link">
    <span class="md-ellipsis">
      get_insecure()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_service_name" class="md-nav__link">
    <span class="md-ellipsis">
      get_service_name()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_service_name()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#envconfigmanager" class="md-nav__link">
    <span class="md-ellipsis">
      EnvConfigManager
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.config_managers.EnvConfigManager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      get_endpoint()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_exporter_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_exporter_type()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_insecure" class="md-nav__link">
    <span class="md-ellipsis">
      get_insecure()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_service_name" class="md-nav__link">
    <span class="md-ellipsis">
      get_service_name()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_service_name()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#awsconfigmanager" class="md-nav__link">
    <span class="md-ellipsis">
      AWSConfigManager
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.config_managers.AWSConfigManager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      get_endpoint()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_exporter_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_exporter_type()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_insecure" class="md-nav__link">
    <span class="md-ellipsis">
      get_insecure()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_service_name" class="md-nav__link">
    <span class="md-ellipsis">
      get_service_name()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="get_service_name()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prometheusmetricsdecorator" class="md-nav__link">
    <span class="md-ellipsis">
      PrometheusMetricsDecorator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.add_metrics_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      add_metrics_endpoint()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.consume_time" class="md-nav__link">
    <span class="md-ellipsis">
      consume_time()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.db_time" class="md-nav__link">
    <span class="md-ellipsis">
      db_time()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.handle_exception" class="md-nav__link">
    <span class="md-ellipsis">
      handle_exception()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.instrument" class="md-nav__link">
    <span class="md-ellipsis">
      instrument()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.print_time" class="md-nav__link">
    <span class="md-ellipsis">
      print_time()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.produce_time" class="md-nav__link">
    <span class="md-ellipsis">
      produce_time()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.record_metric" class="md-nav__link">
    <span class="md-ellipsis">
      record_metric()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#locationrequestcounter" class="md-nav__link">
    <span class="md-ellipsis">
      LocationRequestCounter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requestcounter" class="md-nav__link">
    <span class="md-ellipsis">
      RequestCounter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.requestMetrics.RequestCounter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#servererrormetrics" class="md-nav__link">
    <span class="md-ellipsis">
      ServerErrorMetrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requesthist" class="md-nav__link">
    <span class="md-ellipsis">
      RequestHist
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.requestMetrics.RequestHist
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpuusagemonitor" class="md-nav__link">
    <span class="md-ellipsis">
      CpuUsageMonitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memoryusagemonitor" class="md-nav__link">
    <span class="md-ellipsis">
      MemoryUsageMonitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diskusagemonitor" class="md-nav__link">
    <span class="md-ellipsis">
      DiskUsageMonitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#networkusagemonitor" class="md-nav__link">
    <span class="md-ellipsis">
      NetworkUsageMonitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.after_request" class="md-nav__link">
    <span class="md-ellipsis">
      after_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.before_request" class="md-nav__link">
    <span class="md-ellipsis">
      before_request()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.setup_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      setup_metrics()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.update_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      update_metrics()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="update_metrics()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tracingconfig" class="md-nav__link">
    <span class="md-ellipsis">
      TracingConfig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.TracingConfig" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.tracing_manager.TracingConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.TracingConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.TracingConfig.configure_tracing" class="md-nav__link">
    <span class="md-ellipsis">
      configure_tracing()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="configure_tracing()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#otlptracingconfig" class="md-nav__link">
    <span class="md-ellipsis">
      OTLPTracingConfig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.OTLPTracingConfig" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.tracing_manager.OTLPTracingConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.OTLPTracingConfig.configure_tracing" class="md-nav__link">
    <span class="md-ellipsis">
      configure_tracing()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="configure_tracing()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jaegertracingconfig" class="md-nav__link">
    <span class="md-ellipsis">
      JaegerTracingConfig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.JaegerTracingConfig" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.tracing_manager.JaegerTracingConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.tracing_manager.JaegerTracingConfig.configure_tracing" class="md-nav__link">
    <span class="md-ellipsis">
      configure_tracing()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#span_with_attributes" class="md-nav__link">
    <span class="md-ellipsis">
      span_with_attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.context_manager.span_with_attributes" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.context_manager.span_with_attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.tempo.context_manager.span_with_attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#span_with_event" class="md-nav__link">
    <span class="md-ellipsis">
      span_with_event
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.context_manager.span_with_event" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.context_manager.span_with_event
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.tempo.context_manager.span_with_event">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_span_attributes" class="md-nav__link">
    <span class="md-ellipsis">
      add_span_attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.decorator_manager.add_span_attributes" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.decorator_manager.add_span_attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.tempo.decorator_manager.add_span_attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_span_event" class="md-nav__link">
    <span class="md-ellipsis">
      add_span_event
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.tempo.decorator_manager.add_span_event" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.tempo.decorator_manager.add_span_event
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.tempo.decorator_manager.add_span_event">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure_monitor" class="md-nav__link">
    <span class="md-ellipsis">
      configure_monitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.config_metrics.configure_monitor" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.config_metrics.configure_monitor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.core.config_metrics.configure_monitor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get_enabled_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      get_enabled_metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.metrics.get_enabled_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.metrics.get_enabled_metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.core.metrics.get_enabled_metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get_metrics_classes" class="md-nav__link">
    <span class="md-ellipsis">
      get_metrics_classes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.core.metrics.get_metrics_classes" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.core.metrics.get_metrics_classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.core.metrics.get_metrics_classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create_unified_metrics_class" class="md-nav__link">
    <span class="md-ellipsis">
      create_unified_metrics_class
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.prometheus.unifiedMetrics.create_unified_metrics_class" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.prometheus.unifiedMetrics.create_unified_metrics_class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.prometheus.unifiedMetrics.create_unified_metrics_class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authenticate" class="md-nav__link">
    <span class="md-ellipsis">
      authenticate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.utils.basic_authentication.authenticate" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.utils.basic_authentication.authenticate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="kal_utils.monitoring.utils.basic_authentication.authenticate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add_parent_directory_to_sys_path" class="md-nav__link">
    <span class="md-ellipsis">
      add_parent_directory_to_sys_path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kal_utils.monitoring.utils.relative_imports.add_parent_directory_to_sys_path" class="md-nav__link">
    <span class="md-ellipsis">
      kal_utils.monitoring.utils.relative_imports.add_parent_directory_to_sys_path
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  

  
  


<h1 id="monitoring-module">Monitoring Module<a class="headerlink" href="#monitoring-module" title="Permanent link">&para;</a></h1>
<p>This module provides interfaces and prebuilt monitoring configuration and integration tools.</p>
<h2 id="classes">Classes<a class="headerlink" href="#classes" title="Permanent link">&para;</a></h2>
<h3 id="configmanager">ConfigManager<a class="headerlink" href="#configmanager" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.core.config_managers.ConfigManager"></a>
    <div class="doc doc-contents first">

      <p>Abstract base class for configuration management.</p>
<p>This class defines the methods that must be implemented by any concrete configuration manager
to provide configuration details required by the application.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ConfigManager</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for configuration management.</span>

<span class="sd">    This class defines the methods that must be implemented by any concrete configuration manager</span>
<span class="sd">    to provide configuration details required by the application.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_service_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract method to retrieve the service name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The service name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract method to retrieve the endpoint URL.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The endpoint URL.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_exporter_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract method to retrieve the exporter type.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The exporter type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_insecure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract method to determine if the connection is insecure.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the connection is insecure, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.ConfigManager.get_endpoint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_endpoint" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to retrieve the endpoint URL.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The endpoint URL.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">get_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract method to retrieve the endpoint URL.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The endpoint URL.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.ConfigManager.get_exporter_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_exporter_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_exporter_type" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to retrieve the exporter type.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The exporter type.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">get_exporter_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract method to retrieve the exporter type.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The exporter type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.ConfigManager.get_insecure" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_insecure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_insecure" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to determine if the connection is insecure.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the connection is insecure, False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">get_insecure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract method to determine if the connection is insecure.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the connection is insecure, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.ConfigManager.get_service_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_service_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.ConfigManager.get_service_name" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to retrieve the service name.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The service name.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">get_service_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract method to retrieve the service name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The service name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="envconfigmanager">EnvConfigManager<a class="headerlink" href="#envconfigmanager" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.core.config_managers.EnvConfigManager"></a>
    <div class="doc doc-contents first">

      <p>Configuration manager that reads configuration from environment variables.</p>
<p>This implementation retrieves configuration values from environment variables.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">EnvConfigManager</span><span class="p">(</span><span class="n">ConfigManager</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configuration manager that reads configuration from environment variables.</span>

<span class="sd">    This implementation retrieves configuration values from environment variables.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_service_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the service name from the environment variables.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The service name, defaulting to &quot;my-fastapi-service&quot; if not set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OTEL_SERVICE_NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;my-fastapi-service&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the endpoint URL from the environment variables.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The endpoint URL, defaulting to &quot;http://localhost:4317&quot; if not set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OTEL_ENDPOINT&quot;</span><span class="p">,</span> <span class="s2">&quot;http://localhost:4317&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_exporter_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the exporter type from the environment variables.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The exporter type, defaulting to &quot;otlp&quot; if not set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OTEL_EXPORTER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;otlp&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_insecure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines if the connection is insecure based on environment variables.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the connection is insecure (when &quot;OTEL_INSECURE&quot; is &quot;true&quot;, &quot;1&quot;, or &quot;yes&quot;), False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OTEL_INSECURE&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.EnvConfigManager.get_endpoint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_endpoint" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the endpoint URL from the environment variables.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The endpoint URL, defaulting to "http://localhost:4317" if not set.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the endpoint URL from the environment variables.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The endpoint URL, defaulting to &quot;http://localhost:4317&quot; if not set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OTEL_ENDPOINT&quot;</span><span class="p">,</span> <span class="s2">&quot;http://localhost:4317&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.EnvConfigManager.get_exporter_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_exporter_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_exporter_type" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the exporter type from the environment variables.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The exporter type, defaulting to "otlp" if not set.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_exporter_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the exporter type from the environment variables.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The exporter type, defaulting to &quot;otlp&quot; if not set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OTEL_EXPORTER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;otlp&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.EnvConfigManager.get_insecure" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_insecure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_insecure" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Determines if the connection is insecure based on environment variables.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the connection is insecure (when "OTEL_INSECURE" is "true", "1", or "yes"), False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_insecure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determines if the connection is insecure based on environment variables.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the connection is insecure (when &quot;OTEL_INSECURE&quot; is &quot;true&quot;, &quot;1&quot;, or &quot;yes&quot;), False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OTEL_INSECURE&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.EnvConfigManager.get_service_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_service_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.EnvConfigManager.get_service_name" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the service name from the environment variables.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The service name, defaulting to "my-fastapi-service" if not set.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_service_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the service name from the environment variables.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The service name, defaulting to &quot;my-fastapi-service&quot; if not set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OTEL_SERVICE_NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;my-fastapi-service&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="awsconfigmanager">AWSConfigManager<a class="headerlink" href="#awsconfigmanager" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.core.config_managers.AWSConfigManager"></a>
    <div class="doc doc-contents first">

      <p>Configuration manager that retrieves configuration from AWS Secrets Manager.</p>
<p>This implementation retrieves configuration values stored in AWS Secrets Manager.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AWSConfigManager</span><span class="p">(</span><span class="n">ConfigManager</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configuration manager that retrieves configuration from AWS Secrets Manager.</span>

<span class="sd">    This implementation retrieves configuration values stored in AWS Secrets Manager.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the AWSConfigManager with the secret name and AWS region.</span>

<span class="sd">        Args:</span>
<span class="sd">            secret_name (str): The name of the secret in AWS Secrets Manager.</span>
<span class="sd">            region_name (str): The AWS region where the secret is stored.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secret_name</span> <span class="o">=</span> <span class="n">secret_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">region_name</span> <span class="o">=</span> <span class="n">region_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;secretsmanager&quot;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_secret</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the secret value from AWS Secrets Manager.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The secret value as a JSON string.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If there is an error retrieving the secret from AWS Secrets Manager.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_secret_value</span><span class="p">(</span><span class="n">SecretId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">secret_name</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;SecretString&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="n">ClientError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error retrieving secret from AWS Secrets Manager: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_service_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the service name from the AWS secret.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The service name, defaulting to &quot;my-fastapi-service&quot; if not found in the secret.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secret</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OTEL_SERVICE_NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;my-fastapi-service&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the endpoint URL from the AWS secret.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The endpoint URL, defaulting to &quot;http://localhost:4317&quot; if not found in the secret.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secret</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OTEL_ENDPOINT&quot;</span><span class="p">,</span> <span class="s2">&quot;http://localhost:4317&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_exporter_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the exporter type from the AWS secret.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The exporter type, defaulting to &quot;otlp&quot; if not found in the secret.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secret</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OTEL_EXPORTER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;otlp&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_insecure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines if the connection is insecure based on the AWS secret.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the connection is insecure (when &quot;OTEL_INSECURE&quot; is &quot;true&quot;, &quot;1&quot;, or &quot;yes&quot; in the secret), False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secret</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OTEL_INSECURE&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.AWSConfigManager.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">secret_name</span><span class="p">,</span> <span class="n">region_name</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initializes the AWSConfigManager with the secret name and AWS region.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>secret_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the secret in AWS Secrets Manager.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>region_name</code></td>
        <td><code>str</code></td>
        <td><p>The AWS region where the secret is stored.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">secret_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the AWSConfigManager with the secret name and AWS region.</span>

<span class="sd">    Args:</span>
<span class="sd">        secret_name (str): The name of the secret in AWS Secrets Manager.</span>
<span class="sd">        region_name (str): The AWS region where the secret is stored.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">secret_name</span> <span class="o">=</span> <span class="n">secret_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">region_name</span> <span class="o">=</span> <span class="n">region_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;secretsmanager&quot;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region_name</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.AWSConfigManager.get_endpoint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_endpoint" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the endpoint URL from the AWS secret.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The endpoint URL, defaulting to "http://localhost:4317" if not found in the secret.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the endpoint URL from the AWS secret.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The endpoint URL, defaulting to &quot;http://localhost:4317&quot; if not found in the secret.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secret</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OTEL_ENDPOINT&quot;</span><span class="p">,</span> <span class="s2">&quot;http://localhost:4317&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.AWSConfigManager.get_exporter_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_exporter_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_exporter_type" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the exporter type from the AWS secret.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The exporter type, defaulting to "otlp" if not found in the secret.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_exporter_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the exporter type from the AWS secret.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The exporter type, defaulting to &quot;otlp&quot; if not found in the secret.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secret</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OTEL_EXPORTER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;otlp&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.AWSConfigManager.get_insecure" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_insecure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_insecure" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Determines if the connection is insecure based on the AWS secret.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>True if the connection is insecure (when "OTEL_INSECURE" is "true", "1", or "yes" in the secret), False otherwise.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_insecure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determines if the connection is insecure based on the AWS secret.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the connection is insecure (when &quot;OTEL_INSECURE&quot; is &quot;true&quot;, &quot;1&quot;, or &quot;yes&quot; in the secret), False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secret</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OTEL_INSECURE&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.core.config_managers.AWSConfigManager.get_service_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_service_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.core.config_managers.AWSConfigManager.get_service_name" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Retrieves the service name from the AWS secret.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The service name, defaulting to "my-fastapi-service" if not found in the secret.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_managers.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_service_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the service name from the AWS secret.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The service name, defaulting to &quot;my-fastapi-service&quot; if not found in the secret.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secret</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OTEL_SERVICE_NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;my-fastapi-service&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="prometheusmetricsdecorator">PrometheusMetricsDecorator<a class="headerlink" href="#prometheusmetricsdecorator" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator"></a>
    <div class="doc doc-contents first">

      <p>An abstract base class for creating Prometheus metrics decorators.</p>
<p>This class provides a framework for implementing Prometheus metrics
in a FastAPI application. To use this class, create a subclass and
implement the abstract methods.</p>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>NotImplementedError</code></td>
        <td><p>If any of the abstract methods are not implemented in the subclass.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PrometheusMetricsDecorator</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An abstract base class for creating Prometheus metrics decorators.</span>

<span class="sd">    This class provides a framework for implementing Prometheus metrics</span>
<span class="sd">    in a FastAPI application. To use this class, create a subclass and</span>
<span class="sd">    implement the abstract methods.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: If any of the abstract methods are not implemented in the subclass.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the metrics decorator.</span>
<span class="sd">        Calls setup_metrics() which should be implemented in the subclass.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># Define the metrics if they don&#39;t already exist in the registry</span>
        <span class="k">if</span> <span class="s1">&#39;db_time_seconds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;db_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Summary</span><span class="p">(</span>
                <span class="s1">&#39;db_time_seconds&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Time taken for database operations&#39;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;db_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;db_time_seconds&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s1">&#39;print_time_seconds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;print_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Summary</span><span class="p">(</span>
                <span class="s1">&#39;print_time_seconds&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Time taken for print operations&#39;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;print_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;print_time_seconds&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s1">&#39;produce_time_seconds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;produce_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span>
                <span class="s1">&#39;produce_time_seconds&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Time taken to produce messages in seconds&#39;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;produce_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;produce_time_seconds&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s1">&#39;consume_time_seconds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;consume_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span>
                <span class="s1">&#39;consume_time_seconds&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Time taken to consume messages in seconds&#39;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;consume_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;consume_time_seconds&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_metrics_endpoint</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract method to set up Prometheus metrics.</span>

<span class="sd">        Implement this method in your subclass to initialize all the</span>
<span class="sd">        Prometheus metrics you want to track (e.g., Counters, Gauges, Histograms).</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: If not implemented in the subclass.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;setup_metrics() must be implemented in the subclass&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_metrics_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a /metrics endpoint to the FastAPI app for Prometheus to scrape.</span>

<span class="sd">        Args:</span>
<span class="sd">            app (FastAPI): The FastAPI application instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/metrics&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">metrics</span><span class="p">(</span><span class="n">credentials</span><span class="p">:</span> <span class="n">HTTPBasicCredentials</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">authenticate</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">generate_latest</span><span class="p">(),</span> <span class="n">media_type</span><span class="o">=</span><span class="n">CONTENT_TYPE_LATEST</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">instrument</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decorator to instrument FastAPI route handlers.</span>

<span class="sd">        This method returns a decorator that wraps route handlers to execute</span>
<span class="sd">        before_request() and after_request() methods around each request.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Callable: A decorator function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
            <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
            <span class="k">async</span> <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">before_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">after_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">response</span>
            <span class="k">return</span> <span class="n">wrapper</span>
        <span class="k">return</span> <span class="n">decorator</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract method to be called before each request is processed.</span>

<span class="sd">        Implement this method in your subclass to perform any pre-request</span>
<span class="sd">        actions, such as incrementing request counters or starting timers.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The FastAPI Request object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: If not implemented in the subclass.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;before_request() must be implemented in the subclass&quot;</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract method to be called after each request is processed.</span>

<span class="sd">        Implement this method in your subclass to perform any post-request</span>
<span class="sd">        actions, such as recording response times or updating response status metrics.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The FastAPI Request object.</span>
<span class="sd">            response (Any): The response returned by the route handler.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: If not implemented in the subclass.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;after_request() must be implemented in the subclass&quot;</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract method to be called after each request is processed.</span>

<span class="sd">        Implement this method in your subclass to perform any post-request</span>
<span class="sd">        actions, such as recording response times or updating response status metrics.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The FastAPI Request object.</span>
<span class="sd">            response (Any): The response returned by the route handler.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: If not implemented in the subclass.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;after_request() must be implemented in the subclass&quot;</span><span class="p">)</span>

    <span class="nd">@contextmanager</span>
    <span class="k">def</span> <span class="nf">db_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Context manager for tracking DB operation time.</span>

<span class="sd">        This context manager measures the time taken for database operations</span>
<span class="sd">        and records this duration as a Prometheus metric.</span>

<span class="sd">        Example:</span>
<span class="sd">            with self.db_time():</span>
<span class="sd">                # Perform database operations here</span>
<span class="sd">                result = perform_database_query()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">record_metric</span><span class="p">(</span><span class="s1">&#39;db_time&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>

    <span class="nd">@contextmanager</span>
    <span class="k">def</span> <span class="nf">print_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Context manager for tracking print operation time.</span>

<span class="sd">        This context manager measures the time taken for print operations</span>
<span class="sd">        or similar tasks and records this duration as a Prometheus metric.</span>

<span class="sd">        Example:</span>
<span class="sd">            with self.print_time():</span>
<span class="sd">                # Perform print operations here</span>
<span class="sd">                print(&quot;Logging some information...&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">record_metric</span><span class="p">(</span><span class="s1">&#39;print_time&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>

    <span class="nd">@contextmanager</span>
    <span class="k">def</span> <span class="nf">produce_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Context manager for tracking the time taken to produce a message.</span>

<span class="sd">        This context manager measures the time taken for produce operations</span>
<span class="sd">        and records this duration as a Prometheus metric.</span>

<span class="sd">        Example:</span>
<span class="sd">            with self.produce_time():</span>
<span class="sd">                # Perform produce operations here</span>
<span class="sd">                produce_message()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">record_metric</span><span class="p">(</span><span class="s1">&#39;produce_time&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>

    <span class="nd">@contextmanager</span>
    <span class="k">def</span> <span class="nf">consume_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Context manager for tracking the time taken to produce a message.</span>

<span class="sd">        This context manager measures the time taken for produce operations</span>
<span class="sd">        and records this duration as a Prometheus metric.</span>

<span class="sd">        Example:</span>
<span class="sd">            with self.produce_time():</span>
<span class="sd">                # Perform produce operations here</span>
<span class="sd">                produce_message()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">record_metric</span><span class="p">(</span><span class="s1">&#39;consume_time&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">record_metric</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Record the metric with the given name and duration.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the metric.</span>
<span class="sd">            duration (float): The duration of the operation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle exceptions in context managers if needed.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the metric.</span>
<span class="sd">            exc_type (type): The type of exception.</span>
<span class="sd">            exc_val (Exception): The exception value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize the metrics decorator.
Calls setup_metrics() which should be implemented in the subclass.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the metrics decorator.</span>
<span class="sd">    Calls setup_metrics() which should be implemented in the subclass.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># Define the metrics if they don&#39;t already exist in the registry</span>
    <span class="k">if</span> <span class="s1">&#39;db_time_seconds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;db_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Summary</span><span class="p">(</span>
            <span class="s1">&#39;db_time_seconds&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Time taken for database operations&#39;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;db_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;db_time_seconds&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="s1">&#39;print_time_seconds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;print_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Summary</span><span class="p">(</span>
            <span class="s1">&#39;print_time_seconds&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Time taken for print operations&#39;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;print_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;print_time_seconds&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="s1">&#39;produce_time_seconds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;produce_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span>
            <span class="s1">&#39;produce_time_seconds&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Time taken to produce messages in seconds&#39;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;produce_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;produce_time_seconds&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="s1">&#39;consume_time_seconds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;consume_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span>
            <span class="s1">&#39;consume_time_seconds&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Time taken to consume messages in seconds&#39;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;consume_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;consume_time_seconds&#39;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_metrics_endpoint</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.add_metrics_endpoint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_metrics_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.add_metrics_endpoint" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Add a /metrics endpoint to the FastAPI app for Prometheus to scrape.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>app</code></td>
        <td><code>FastAPI</code></td>
        <td><p>The FastAPI application instance.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_metrics_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a /metrics endpoint to the FastAPI app for Prometheus to scrape.</span>

<span class="sd">    Args:</span>
<span class="sd">        app (FastAPI): The FastAPI application instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/metrics&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">metrics</span><span class="p">(</span><span class="n">credentials</span><span class="p">:</span> <span class="n">HTTPBasicCredentials</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">authenticate</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">generate_latest</span><span class="p">(),</span> <span class="n">media_type</span><span class="o">=</span><span class="n">CONTENT_TYPE_LATEST</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.after_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.after_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to be called after each request is processed.</p>
<p>Implement this method in your subclass to perform any post-request
actions, such as recording response times or updating response status metrics.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The FastAPI Request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The response returned by the route handler.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>NotImplementedError</code></td>
        <td><p>If not implemented in the subclass.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract method to be called after each request is processed.</span>

<span class="sd">    Implement this method in your subclass to perform any post-request</span>
<span class="sd">    actions, such as recording response times or updating response status metrics.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The FastAPI Request object.</span>
<span class="sd">        response (Any): The response returned by the route handler.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: If not implemented in the subclass.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;after_request() must be implemented in the subclass&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.before_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.before_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to be called before each request is processed.</p>
<p>Implement this method in your subclass to perform any pre-request
actions, such as incrementing request counters or starting timers.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The FastAPI Request object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>NotImplementedError</code></td>
        <td><p>If not implemented in the subclass.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract method to be called before each request is processed.</span>

<span class="sd">    Implement this method in your subclass to perform any pre-request</span>
<span class="sd">    actions, such as incrementing request counters or starting timers.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The FastAPI Request object.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: If not implemented in the subclass.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;before_request() must be implemented in the subclass&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.consume_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">consume_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.consume_time" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Context manager for tracking the time taken to produce a message.</p>
<p>This context manager measures the time taken for produce operations
and records this duration as a Prometheus metric.</p>

<p><strong>Examples:</strong></p>
    <p>with self.produce_time():
    # Perform produce operations here
    produce_message()</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">consume_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context manager for tracking the time taken to produce a message.</span>

<span class="sd">    This context manager measures the time taken for produce operations</span>
<span class="sd">    and records this duration as a Prometheus metric.</span>

<span class="sd">    Example:</span>
<span class="sd">        with self.produce_time():</span>
<span class="sd">            # Perform produce operations here</span>
<span class="sd">            produce_message()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">record_metric</span><span class="p">(</span><span class="s1">&#39;consume_time&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.db_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">db_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.db_time" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Context manager for tracking DB operation time.</p>
<p>This context manager measures the time taken for database operations
and records this duration as a Prometheus metric.</p>

<p><strong>Examples:</strong></p>
    <p>with self.db_time():
    # Perform database operations here
    result = perform_database_query()</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">db_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context manager for tracking DB operation time.</span>

<span class="sd">    This context manager measures the time taken for database operations</span>
<span class="sd">    and records this duration as a Prometheus metric.</span>

<span class="sd">    Example:</span>
<span class="sd">        with self.db_time():</span>
<span class="sd">            # Perform database operations here</span>
<span class="sd">            result = perform_database_query()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">record_metric</span><span class="p">(</span><span class="s1">&#39;db_time&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.handle_exception" class="doc doc-heading">
<code class="highlight language-python"><span class="n">handle_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.handle_exception" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Handle exceptions in context managers if needed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the metric.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>exc_type</code></td>
        <td><code>type</code></td>
        <td><p>The type of exception.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>exc_val</code></td>
        <td><code>Exception</code></td>
        <td><p>The exception value.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">handle_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handle exceptions in context managers if needed.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the metric.</span>
<span class="sd">        exc_type (type): The type of exception.</span>
<span class="sd">        exc_val (Exception): The exception value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.instrument" class="doc doc-heading">
<code class="highlight language-python"><span class="n">instrument</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.instrument" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Decorator to instrument FastAPI route handlers.</p>
<p>This method returns a decorator that wraps route handlers to execute
before_request() and after_request() methods around each request.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Callable</code></td>
      <td><p>A decorator function.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">instrument</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decorator to instrument FastAPI route handlers.</span>

<span class="sd">    This method returns a decorator that wraps route handlers to execute</span>
<span class="sd">    before_request() and after_request() methods around each request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Callable: A decorator function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">before_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">after_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.print_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">print_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.print_time" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Context manager for tracking print operation time.</p>
<p>This context manager measures the time taken for print operations
or similar tasks and records this duration as a Prometheus metric.</p>

<p><strong>Examples:</strong></p>
    <p>with self.print_time():
    # Perform print operations here
    print("Logging some information...")</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">print_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context manager for tracking print operation time.</span>

<span class="sd">    This context manager measures the time taken for print operations</span>
<span class="sd">    or similar tasks and records this duration as a Prometheus metric.</span>

<span class="sd">    Example:</span>
<span class="sd">        with self.print_time():</span>
<span class="sd">            # Perform print operations here</span>
<span class="sd">            print(&quot;Logging some information...&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">record_metric</span><span class="p">(</span><span class="s1">&#39;print_time&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.produce_time" class="doc doc-heading">
<code class="highlight language-python"><span class="n">produce_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.produce_time" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Context manager for tracking the time taken to produce a message.</p>
<p>This context manager measures the time taken for produce operations
and records this duration as a Prometheus metric.</p>

<p><strong>Examples:</strong></p>
    <p>with self.produce_time():
    # Perform produce operations here
    produce_message()</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">produce_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context manager for tracking the time taken to produce a message.</span>

<span class="sd">    This context manager measures the time taken for produce operations</span>
<span class="sd">    and records this duration as a Prometheus metric.</span>

<span class="sd">    Example:</span>
<span class="sd">        with self.produce_time():</span>
<span class="sd">            # Perform produce operations here</span>
<span class="sd">            produce_message()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">record_metric</span><span class="p">(</span><span class="s1">&#39;produce_time&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.record_metric" class="doc doc-heading">
<code class="highlight language-python"><span class="n">record_metric</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.record_metric" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Record the metric with the given name and duration.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the metric.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>duration</code></td>
        <td><code>float</code></td>
        <td><p>The duration of the operation.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">record_metric</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Record the metric with the given name and duration.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the metric.</span>
<span class="sd">        duration (float): The duration of the operation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.setup_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.setup_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to set up Prometheus metrics.</p>
<p>Implement this method in your subclass to initialize all the
Prometheus metrics you want to track (e.g., Counters, Gauges, Histograms).</p>

<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>NotImplementedError</code></td>
        <td><p>If not implemented in the subclass.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract method to set up Prometheus metrics.</span>

<span class="sd">    Implement this method in your subclass to initialize all the</span>
<span class="sd">    Prometheus metrics you want to track (e.g., Counters, Gauges, Histograms).</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: If not implemented in the subclass.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;setup_metrics() must be implemented in the subclass&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.update_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.prometheus_base.PrometheusMetricsDecorator.update_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to be called after each request is processed.</p>
<p>Implement this method in your subclass to perform any post-request
actions, such as recording response times or updating response status metrics.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The FastAPI Request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The response returned by the route handler.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>NotImplementedError</code></td>
        <td><p>If not implemented in the subclass.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/prometheus_base.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract method to be called after each request is processed.</span>

<span class="sd">    Implement this method in your subclass to perform any post-request</span>
<span class="sd">    actions, such as recording response times or updating response status metrics.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The FastAPI Request object.</span>
<span class="sd">        response (Any): The response returned by the route handler.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: If not implemented in the subclass.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;after_request() must be implemented in the subclass&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="locationrequestcounter">LocationRequestCounter<a class="headerlink" href="#locationrequestcounter" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter"></a>
    <div class="doc doc-contents first">

      <p>A class to monitor HTTP request metrics based on request locations using Prometheus.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>location_requests</code></td>
        <td><code>Counter</code></td>
        <td><p>A Prometheus counter that tracks the total number of requests
received from different locations, labeled by latitude and longitude.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/locationRequestCounter.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LocationRequestCounter</span><span class="p">(</span><span class="n">PrometheusMetricsDecorator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to monitor HTTP request metrics based on request locations using Prometheus.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        location_requests (Counter): A Prometheus counter that tracks the total number of requests</span>
<span class="sd">            received from different locations, labeled by latitude and longitude.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the LocationRequestCounter class.</span>

<span class="sd">        Args:</span>
<span class="sd">            app: The FastAPI application instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location_requests</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Prometheus metrics for tracking request locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;location_requests&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">location_requests</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span>
                <span class="s1">&#39;location_requests&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Total number of requests received by location (latitude, longitude)&#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">location_requests</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;location_requests&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method can be used to perform actions before processing the request.</span>
<span class="sd">        Currently, no actions are performed here.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Extract client IP address</span>
        <span class="n">client_ip</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">host</span>

        <span class="c1"># Get location data</span>
        <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span> <span class="o">=</span> <span class="n">get_location_from_ip</span><span class="p">(</span><span class="n">client_ip</span><span class="p">)</span>

        <span class="c1"># Increment the location-based counter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location_requests</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span><span class="n">latitude</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">latitude</span><span class="p">),</span> <span class="n">longitude</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">longitude</span><span class="p">))</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize the LocationRequestCounter class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>app</code></td>
        <td></td>
        <td><p>The FastAPI application instance.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/locationRequestCounter.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the LocationRequestCounter class.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI application instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">location_requests</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.after_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.after_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/locationRequestCounter.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Extract client IP address</span>
    <span class="n">client_ip</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">host</span>

    <span class="c1"># Get location data</span>
    <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span> <span class="o">=</span> <span class="n">get_location_from_ip</span><span class="p">(</span><span class="n">client_ip</span><span class="p">)</span>

    <span class="c1"># Increment the location-based counter</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">location_requests</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span><span class="n">latitude</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">latitude</span><span class="p">),</span> <span class="n">longitude</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">longitude</span><span class="p">))</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.before_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.before_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>This method can be used to perform actions before processing the request.
Currently, no actions are performed here.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/locationRequestCounter.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method can be used to perform actions before processing the request.</span>
<span class="sd">    Currently, no actions are performed here.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.setup_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.setup_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize Prometheus metrics for tracking request locations.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/locationRequestCounter.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Prometheus metrics for tracking request locations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;location_requests&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location_requests</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span>
            <span class="s1">&#39;location_requests&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Total number of requests received by location (latitude, longitude)&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">]</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location_requests</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;location_requests&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.update_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.locationRequestCounter.LocationRequestCounter.update_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to be called after each request is processed.</p>
<p>Implement this method in your subclass to perform any post-request
actions, such as recording response times or updating response status metrics.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The FastAPI Request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The response returned by the route handler.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>NotImplementedError</code></td>
        <td><p>If not implemented in the subclass.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/locationRequestCounter.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="requestcounter">RequestCounter<a class="headerlink" href="#requestcounter" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.prometheus.requestMetrics.RequestCounter"></a>
    <div class="doc doc-contents first">

      <p>A class to monitor HTTP request metrics using Prometheus.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>total_requests</code></td>
        <td><code>Counter</code></td>
        <td><p>A Prometheus counter that tracks the total number of requests
received, labeled by HTTP status code.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">RequestCounter</span><span class="p">(</span><span class="n">PrometheusMetricsDecorator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to monitor HTTP request metrics using Prometheus.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        total_requests (Counter): A Prometheus counter that tracks the total number of requests</span>
<span class="sd">            received, labeled by HTTP status code.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the RequestCounter class.</span>

<span class="sd">        Args:</span>
<span class="sd">            app: The FastAPI application instance. This parameter is required for initializing</span>
<span class="sd">                 the Prometheus metrics and integrating them with the FastAPI application.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Prometheus metrics for tracking request metrics.</span>

<span class="sd">        This method sets up:</span>
<span class="sd">            - `total_requests`: A Prometheus Counter to track the number of requests received,</span>
<span class="sd">              with labels for HTTP status codes. If the counter already exists in the Prometheus</span>
<span class="sd">              registry, it will reuse the existing one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;total_requests&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span>
                <span class="s1">&#39;total_requests&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Total number of requests received by status code&#39;</span><span class="p">,</span>
                <span class="p">[</span><span class="s1">&#39;status_code&#39;</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;total_requests&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object. This method does not currently</span>
<span class="sd">                               perform any actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Increment the `total_requests` counter, labeled by the status code of the response.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Determine the status code and increment the corresponding counter</span>
        <span class="n">status_code</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">status_code</span><span class="p">))</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize the RequestCounter class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>app</code></td>
        <td></td>
        <td><p>The FastAPI application instance. This parameter is required for initializing
 the Prometheus metrics and integrating them with the FastAPI application.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the RequestCounter class.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI application instance. This parameter is required for initializing</span>
<span class="sd">             the Prometheus metrics and integrating them with the FastAPI application.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.after_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.after_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Increment the <code>total_requests</code> counter, labeled by the status code of the response.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Increment the `total_requests` counter, labeled by the status code of the response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Determine the status code and increment the corresponding counter</span>
    <span class="n">status_code</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span><span class="o">.</span><span class="n">labels</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">status_code</span><span class="p">))</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.before_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.before_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">


<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object. This method does not currently
               perform any actions.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object. This method does not currently</span>
<span class="sd">                           perform any actions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.setup_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.setup_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize Prometheus metrics for tracking request metrics.</p>
<p>This method sets up:
    - <code>total_requests</code>: A Prometheus Counter to track the number of requests received,
      with labels for HTTP status codes. If the counter already exists in the Prometheus
      registry, it will reuse the existing one.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Prometheus metrics for tracking request metrics.</span>

<span class="sd">    This method sets up:</span>
<span class="sd">        - `total_requests`: A Prometheus Counter to track the number of requests received,</span>
<span class="sd">          with labels for HTTP status codes. If the counter already exists in the Prometheus</span>
<span class="sd">          registry, it will reuse the existing one.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;total_requests&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span>
            <span class="s1">&#39;total_requests&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Total number of requests received by status code&#39;</span><span class="p">,</span>
            <span class="p">[</span><span class="s1">&#39;status_code&#39;</span><span class="p">]</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_requests</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;total_requests&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.update_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestCounter.update_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to be called after each request is processed.</p>
<p>Implement this method in your subclass to perform any post-request
actions, such as recording response times or updating response status metrics.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The FastAPI Request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The response returned by the route handler.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>NotImplementedError</code></td>
        <td><p>If not implemented in the subclass.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="servererrormetrics">ServerErrorMetrics<a class="headerlink" href="#servererrormetrics" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics"></a>
    <div class="doc doc-contents first">

      <p>A class to monitor server errors using Prometheus.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>server_errors</code></td>
        <td><code>Counter</code></td>
        <td><p>A Prometheus counter to track the number of server errors (5xx status codes).</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ServerErrorMetrics</span><span class="p">(</span><span class="n">PrometheusMetricsDecorator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to monitor server errors using Prometheus.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        server_errors (Counter): A Prometheus counter to track the number of server errors (5xx status codes).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize ServerErrorMetrics class.</span>

<span class="sd">        Args:</span>
<span class="sd">            app: The FastAPI application instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_errors</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Prometheus metrics for tracking server errors.</span>

<span class="sd">        Sets up:</span>
<span class="sd">            - server_errors: A counter to track the number of server errors (5xx status codes).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if the server_errors counter is already in the registry</span>
        <span class="k">if</span> <span class="s1">&#39;server_errors&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server_errors</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;server_errors&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;Total number of server errors (5xx status codes)&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server_errors</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;server_errors&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepare to track request latency.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Record the start time of the request to measure latency.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Increment the server_errors counter for server errors (5xx status codes).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Increment the server_errors counter for 5xx status codes</span>
        <span class="k">if</span> <span class="mi">500</span> <span class="o">&lt;=</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">&lt;</span> <span class="mi">600</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server_errors</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize ServerErrorMetrics class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>app</code></td>
        <td></td>
        <td><p>The FastAPI application instance.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize ServerErrorMetrics class.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI application instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">server_errors</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.after_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.after_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Increment the server_errors counter for server errors (5xx status codes).</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Increment the server_errors counter for server errors (5xx status codes).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Increment the server_errors counter for 5xx status codes</span>
    <span class="k">if</span> <span class="mi">500</span> <span class="o">&lt;=</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">&lt;</span> <span class="mi">600</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_errors</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.before_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.before_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Prepare to track request latency.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Record the start time of the request to measure latency.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prepare to track request latency.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Record the start time of the request to measure latency.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.setup_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.setup_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize Prometheus metrics for tracking server errors.</p>
<p>Sets up:
    - server_errors: A counter to track the number of server errors (5xx status codes).</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Prometheus metrics for tracking server errors.</span>

<span class="sd">    Sets up:</span>
<span class="sd">        - server_errors: A counter to track the number of server errors (5xx status codes).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if the server_errors counter is already in the registry</span>
    <span class="k">if</span> <span class="s1">&#39;server_errors&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_errors</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;server_errors&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;Total number of server errors (5xx status codes)&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_errors</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;server_errors&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.update_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.ServerErrorMetrics.update_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to be called after each request is processed.</p>
<p>Implement this method in your subclass to perform any post-request
actions, such as recording response times or updating response status metrics.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The FastAPI Request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The response returned by the route handler.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>NotImplementedError</code></td>
        <td><p>If not implemented in the subclass.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="requesthist">RequestHist<a class="headerlink" href="#requesthist" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.prometheus.requestMetrics.RequestHist"></a>
    <div class="doc doc-contents first">

      <p>A class to monitor request metrics using Prometheus.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request_latency</code></td>
        <td><code>Histogram</code></td>
        <td><p>A Prometheus histogram to track the latency of requests in seconds.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">RequestHist</span><span class="p">(</span><span class="n">PrometheusMetricsDecorator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to monitor request metrics using Prometheus.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        request_latency (Histogram): A Prometheus histogram to track the latency of requests in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize RequestHist class.</span>

<span class="sd">        Args:</span>
<span class="sd">            app: The FastAPI application instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_latency</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_start_time</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Prometheus metrics for tracking request metrics.</span>

<span class="sd">        Sets up:</span>
<span class="sd">            - request_latency: A histogram to measure the latency of requests in seconds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;request_latency_seconds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request_latency</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span><span class="s1">&#39;request_latency_seconds&#39;</span><span class="p">,</span>
                                             <span class="s1">&#39;Request latency in seconds&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request_latency</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;request_latency_seconds&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepare to track request latency.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Record the start time of the request to measure latency.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>  <span class="c1"># Store the start time</span>

    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Calculate and record the request latency in the request_latency histogram.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Measure and record the request latency</span>
        <span class="n">latency</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_start_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_latency</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">latency</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.RequestHist.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize RequestHist class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>app</code></td>
        <td></td>
        <td><p>The FastAPI application instance.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize RequestHist class.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI application instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">request_latency</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">request_start_time</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.RequestHist.after_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.after_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Calculate and record the request latency in the request_latency histogram.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Calculate and record the request latency in the request_latency histogram.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Measure and record the request latency</span>
    <span class="n">latency</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_start_time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">request_latency</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">latency</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.RequestHist.before_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.before_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Prepare to track request latency.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Record the start time of the request to measure latency.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prepare to track request latency.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Record the start time of the request to measure latency.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">request_start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>  <span class="c1"># Store the start time</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.RequestHist.setup_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.setup_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize Prometheus metrics for tracking request metrics.</p>
<p>Sets up:
    - request_latency: A histogram to measure the latency of requests in seconds.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Prometheus metrics for tracking request metrics.</span>

<span class="sd">    Sets up:</span>
<span class="sd">        - request_latency: A histogram to measure the latency of requests in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;request_latency_seconds&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_latency</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span><span class="s1">&#39;request_latency_seconds&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;Request latency in seconds&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_latency</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;request_latency_seconds&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.requestMetrics.RequestHist.update_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.requestMetrics.RequestHist.update_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to be called after each request is processed.</p>
<p>Implement this method in your subclass to perform any post-request
actions, such as recording response times or updating response status metrics.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The FastAPI Request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The response returned by the route handler.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>NotImplementedError</code></td>
        <td><p>If not implemented in the subclass.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/requestMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="cpuusagemonitor">CpuUsageMonitor<a class="headerlink" href="#cpuusagemonitor" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor"></a>
    <div class="doc doc-contents first">

      <p>A class to monitor CPU usage metrics using Prometheus.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cpu_usage</code></td>
        <td><code>Gauge</code></td>
        <td><p>A Prometheus gauge that tracks the current CPU usage percentage.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CpuUsageMonitor</span><span class="p">(</span><span class="n">PrometheusMetricsDecorator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to monitor CPU usage metrics using Prometheus.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        cpu_usage (Gauge): A Prometheus gauge that tracks the current CPU usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the CpuUsageMonitor class.</span>

<span class="sd">        Args:</span>
<span class="sd">            app: The FastAPI application instance. This parameter is required for initializing</span>
<span class="sd">                 the Prometheus metrics and integrating them with the FastAPI application.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpu_usage</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Prometheus metrics for tracking CPU usage.</span>

<span class="sd">        This method sets up:</span>
<span class="sd">            - cpu_usage: A Prometheus Gauge to track the current CPU usage percentage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;cpu_usage_percentage&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cpu_usage</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
                <span class="s1">&#39;cpu_usage_percentage&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Current CPU usage percentage&#39;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cpu_usage</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;cpu_usage_percentage&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object. This method does not currently</span>
<span class="sd">                               perform any actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Update the cpu_usage gauge with the current CPU usage percentage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Update the cpu_usage gauge with the current CPU usage percentage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Update the CPU usage gauge</span>
        <span class="n">cpu_percent</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">cpu_percent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpu_usage</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cpu_percent</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize the CpuUsageMonitor class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>app</code></td>
        <td></td>
        <td><p>The FastAPI application instance. This parameter is required for initializing
 the Prometheus metrics and integrating them with the FastAPI application.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the CpuUsageMonitor class.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI application instance. This parameter is required for initializing</span>
<span class="sd">             the Prometheus metrics and integrating them with the FastAPI application.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpu_usage</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.after_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.after_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Update the cpu_usage gauge with the current CPU usage percentage.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Update the cpu_usage gauge with the current CPU usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.before_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.before_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">


<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object. This method does not currently
               perform any actions.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object. This method does not currently</span>
<span class="sd">                           perform any actions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.setup_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.setup_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize Prometheus metrics for tracking CPU usage.</p>
<p>This method sets up:
    - cpu_usage: A Prometheus Gauge to track the current CPU usage percentage.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Prometheus metrics for tracking CPU usage.</span>

<span class="sd">    This method sets up:</span>
<span class="sd">        - cpu_usage: A Prometheus Gauge to track the current CPU usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;cpu_usage_percentage&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpu_usage</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
            <span class="s1">&#39;cpu_usage_percentage&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Current CPU usage percentage&#39;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpu_usage</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;cpu_usage_percentage&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.update_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.CpuUsageMonitor.update_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Update the cpu_usage gauge with the current CPU usage percentage.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Update the cpu_usage gauge with the current CPU usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Update the CPU usage gauge</span>
    <span class="n">cpu_percent</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">cpu_percent</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpu_usage</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cpu_percent</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="memoryusagemonitor">MemoryUsageMonitor<a class="headerlink" href="#memoryusagemonitor" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor"></a>
    <div class="doc doc-contents first">

      <p>A class to monitor memory usage metrics using Prometheus.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>memory_usage</code></td>
        <td><code>Gauge</code></td>
        <td><p>A Prometheus gauge that tracks the current memory usage percentage.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MemoryUsageMonitor</span><span class="p">(</span><span class="n">PrometheusMetricsDecorator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to monitor memory usage metrics using Prometheus.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        memory_usage (Gauge): A Prometheus gauge that tracks the current memory usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the MemoryUsageMonitor class.</span>

<span class="sd">        Args:</span>
<span class="sd">            app: The FastAPI application instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memory_usage</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Prometheus metrics for tracking memory usage.</span>

<span class="sd">        This method sets up:</span>
<span class="sd">            - memory_usage: A Prometheus Gauge to track the current memory usage percentage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;memory_usage_percentage&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">memory_usage</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
                <span class="s1">&#39;memory_usage_percentage&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Current memory usage percentage&#39;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">memory_usage</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;memory_usage_percentage&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method does not currently perform any actions.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Update the memory_usage gauge with the current memory usage percentage.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Update the memory_usage gauge with the current memory usage percentage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">memory_info</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memory_usage</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">memory_info</span><span class="o">.</span><span class="n">percent</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize the MemoryUsageMonitor class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>app</code></td>
        <td></td>
        <td><p>The FastAPI application instance.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the MemoryUsageMonitor class.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI application instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">memory_usage</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.after_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.after_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Update the memory_usage gauge with the current memory usage percentage.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Update the memory_usage gauge with the current memory usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.before_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.before_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>This method does not currently perform any actions.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This method does not currently perform any actions.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.setup_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.setup_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize Prometheus metrics for tracking memory usage.</p>
<p>This method sets up:
    - memory_usage: A Prometheus Gauge to track the current memory usage percentage.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Prometheus metrics for tracking memory usage.</span>

<span class="sd">    This method sets up:</span>
<span class="sd">        - memory_usage: A Prometheus Gauge to track the current memory usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;memory_usage_percentage&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memory_usage</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
            <span class="s1">&#39;memory_usage_percentage&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Current memory usage percentage&#39;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memory_usage</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;memory_usage_percentage&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.update_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.MemoryUsageMonitor.update_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Update the memory_usage gauge with the current memory usage percentage.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Update the memory_usage gauge with the current memory usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">memory_info</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">memory_usage</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">memory_info</span><span class="o">.</span><span class="n">percent</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="diskusagemonitor">DiskUsageMonitor<a class="headerlink" href="#diskusagemonitor" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor"></a>
    <div class="doc doc-contents first">

      <p>A class to monitor disk usage metrics using Prometheus.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>disk_usage</code></td>
        <td><code>Gauge</code></td>
        <td><p>A Prometheus gauge that tracks the current disk usage percentage.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DiskUsageMonitor</span><span class="p">(</span><span class="n">PrometheusMetricsDecorator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to monitor disk usage metrics using Prometheus.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        disk_usage (Gauge): A Prometheus gauge that tracks the current disk usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the DiskUsageMonitor class.</span>

<span class="sd">        Args:</span>
<span class="sd">            app: The FastAPI application instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disk_usage</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Prometheus metrics for tracking disk usage.</span>

<span class="sd">        This method sets up:</span>
<span class="sd">            - disk_usage: A Prometheus Gauge to track the current disk usage percentage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;disk_usage_percentage&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disk_usage</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
                <span class="s1">&#39;disk_usage_percentage&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Current disk usage percentage&#39;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disk_usage</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;disk_usage_percentage&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method does not currently perform any actions.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Update the disk_usage gauge with the current disk usage percentage.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Update the disk_usage gauge with the current disk usage percentage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">disk_info</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">disk_usage</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disk_usage</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">disk_info</span><span class="o">.</span><span class="n">percent</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize the DiskUsageMonitor class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>app</code></td>
        <td></td>
        <td><p>The FastAPI application instance.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the DiskUsageMonitor class.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI application instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">disk_usage</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.after_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.after_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Update the disk_usage gauge with the current disk usage percentage.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Update the disk_usage gauge with the current disk usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.before_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.before_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>This method does not currently perform any actions.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This method does not currently perform any actions.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.setup_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.setup_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize Prometheus metrics for tracking disk usage.</p>
<p>This method sets up:
    - disk_usage: A Prometheus Gauge to track the current disk usage percentage.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Prometheus metrics for tracking disk usage.</span>

<span class="sd">    This method sets up:</span>
<span class="sd">        - disk_usage: A Prometheus Gauge to track the current disk usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;disk_usage_percentage&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disk_usage</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
            <span class="s1">&#39;disk_usage_percentage&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Current disk usage percentage&#39;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disk_usage</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;disk_usage_percentage&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.update_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.DiskUsageMonitor.update_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Update the disk_usage gauge with the current disk usage percentage.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Update the disk_usage gauge with the current disk usage percentage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">disk_info</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">disk_usage</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">disk_usage</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">disk_info</span><span class="o">.</span><span class="n">percent</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="networkusagemonitor">NetworkUsageMonitor<a class="headerlink" href="#networkusagemonitor" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor"></a>
    <div class="doc doc-contents first">

      <p>A class to monitor network usage metrics using Prometheus.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>network_bytes_sent</code></td>
        <td><code>Gauge</code></td>
        <td><p>A Prometheus gauge that tracks the number of bytes sent.</p></td>
      </tr>
      <tr>
        <td><code>network_bytes_received</code></td>
        <td><code>Gauge</code></td>
        <td><p>A Prometheus gauge that tracks the number of bytes received.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">NetworkUsageMonitor</span><span class="p">(</span><span class="n">PrometheusMetricsDecorator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to monitor network usage metrics using Prometheus.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        network_bytes_sent (Gauge): A Prometheus gauge that tracks the number of bytes sent.</span>
<span class="sd">        network_bytes_received (Gauge): A Prometheus gauge that tracks the number of bytes received.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the NetworkUsageMonitor class.</span>

<span class="sd">        Args:</span>
<span class="sd">            app: The FastAPI application instance. This parameter is required for initializing</span>
<span class="sd">                 the Prometheus metrics and integrating them with the FastAPI application.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_sent</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_received</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Prometheus metrics for tracking network usage.</span>

<span class="sd">        This method sets up:</span>
<span class="sd">            - network_bytes_sent: A Prometheus Gauge to track the number of bytes sent.</span>
<span class="sd">            - network_bytes_received: A Prometheus Gauge to track the number of bytes received.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;network_bytes_sent&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_sent</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
                <span class="s1">&#39;network_bytes_sent&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Total number of bytes sent&#39;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_sent</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;network_bytes_sent&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s1">&#39;network_bytes_received&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_received</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
                <span class="s1">&#39;network_bytes_received&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Total number of bytes received&#39;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_received</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;network_bytes_received&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method does not currently perform any actions.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Update the network_bytes_sent and network_bytes_received gauges with the current</span>
<span class="sd">              network usage statistics.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update metrics after processing each request.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (Request): The incoming HTTP request object.</span>
<span class="sd">            response (Any): The HTTP response object.</span>

<span class="sd">        Actions:</span>
<span class="sd">            - Update the network_bytes_sent and network_bytes_received gauges with the current</span>
<span class="sd">              network usage statistics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">net_io</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">net_io_counters</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_sent</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">net_io</span><span class="o">.</span><span class="n">bytes_sent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_received</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">net_io</span><span class="o">.</span><span class="n">bytes_recv</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize the NetworkUsageMonitor class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>app</code></td>
        <td></td>
        <td><p>The FastAPI application instance. This parameter is required for initializing
 the Prometheus metrics and integrating them with the FastAPI application.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the NetworkUsageMonitor class.</span>

<span class="sd">    Args:</span>
<span class="sd">        app: The FastAPI application instance. This parameter is required for initializing</span>
<span class="sd">             the Prometheus metrics and integrating them with the FastAPI application.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_sent</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_received</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_metrics</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.after_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.after_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Update the network_bytes_sent and network_bytes_received gauges with the current
  network usage statistics.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Update the network_bytes_sent and network_bytes_received gauges with the current</span>
<span class="sd">          network usage statistics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.before_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.before_request" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>This method does not currently perform any actions.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This method does not currently perform any actions.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.setup_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.setup_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initialize Prometheus metrics for tracking network usage.</p>
<p>This method sets up:
    - network_bytes_sent: A Prometheus Gauge to track the number of bytes sent.
    - network_bytes_received: A Prometheus Gauge to track the number of bytes received.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Prometheus metrics for tracking network usage.</span>

<span class="sd">    This method sets up:</span>
<span class="sd">        - network_bytes_sent: A Prometheus Gauge to track the number of bytes sent.</span>
<span class="sd">        - network_bytes_received: A Prometheus Gauge to track the number of bytes received.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;network_bytes_sent&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_sent</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
            <span class="s1">&#39;network_bytes_sent&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Total number of bytes sent&#39;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_sent</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;network_bytes_sent&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="s1">&#39;network_bytes_received&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_received</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span>
            <span class="s1">&#39;network_bytes_received&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Total number of bytes received&#39;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_received</span> <span class="o">=</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">_names_to_collectors</span><span class="p">[</span><span class="s1">&#39;network_bytes_received&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.update_metrics" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.prometheus.systemMetrics.NetworkUsageMonitor.update_metrics" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Update metrics after processing each request.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>request</code></td>
        <td><code>Request</code></td>
        <td><p>The incoming HTTP request object.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>response</code></td>
        <td><code>Any</code></td>
        <td><p>The HTTP response object.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition actions">
<p class="admonition-title">Actions</p>
<ul>
<li>Update the network_bytes_sent and network_bytes_received gauges with the current
  network usage statistics.</li>
</ul>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/systemMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update metrics after processing each request.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (Request): The incoming HTTP request object.</span>
<span class="sd">        response (Any): The HTTP response object.</span>

<span class="sd">    Actions:</span>
<span class="sd">        - Update the network_bytes_sent and network_bytes_received gauges with the current</span>
<span class="sd">          network usage statistics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">net_io</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">net_io_counters</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_sent</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">net_io</span><span class="o">.</span><span class="n">bytes_sent</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">network_bytes_received</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">net_io</span><span class="o">.</span><span class="n">bytes_recv</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="tracingconfig">TracingConfig<a class="headerlink" href="#tracingconfig" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.tempo.tracing_manager.TracingConfig"></a>
    <div class="doc doc-contents first">

      <p>Abstract base class for configuring tracing with different exporters.</p>
<p>This class defines the interface for configuring tracing. Concrete implementations
should provide specific configurations for various tracing exporters.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>service_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the service for tracing.</p></td>
      </tr>
      <tr>
        <td><code>endpoint</code></td>
        <td><code>str</code></td>
        <td><p>The endpoint URL for the tracing exporter.</p></td>
      </tr>
      <tr>
        <td><code>insecure</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the connection is insecure (default is True).</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/tracing_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">TracingConfig</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for configuring tracing with different exporters.</span>

<span class="sd">    This class defines the interface for configuring tracing. Concrete implementations</span>
<span class="sd">    should provide specific configurations for various tracing exporters.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        service_name (str): The name of the service for tracing.</span>
<span class="sd">        endpoint (str): The endpoint URL for the tracing exporter.</span>
<span class="sd">        insecure (bool): Whether the connection is insecure (default is True).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">insecure</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the TracingConfig with the given parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            service_name (str): The name of the service for tracing.</span>
<span class="sd">            endpoint (str): The endpoint URL for the tracing exporter.</span>
<span class="sd">            insecure (bool, optional): Whether the connection is insecure (default is True).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_name</span> <span class="o">=</span> <span class="n">service_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">insecure</span> <span class="o">=</span> <span class="n">insecure</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">configure_tracing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract method to configure tracing based on the exporter.</span>

<span class="sd">        Concrete implementations must provide their own configuration logic.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.tempo.tracing_manager.TracingConfig.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service_name</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kal_utils.monitoring.tempo.tracing_manager.TracingConfig.__init__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Initializes the TracingConfig with the given parameters.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>service_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the service for tracing.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>endpoint</code></td>
        <td><code>str</code></td>
        <td><p>The endpoint URL for the tracing exporter.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>insecure</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the connection is insecure (default is True).</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/tracing_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">insecure</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the TracingConfig with the given parameters.</span>

<span class="sd">    Args:</span>
<span class="sd">        service_name (str): The name of the service for tracing.</span>
<span class="sd">        endpoint (str): The endpoint URL for the tracing exporter.</span>
<span class="sd">        insecure (bool, optional): Whether the connection is insecure (default is True).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">service_name</span> <span class="o">=</span> <span class="n">service_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">insecure</span> <span class="o">=</span> <span class="n">insecure</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.tempo.tracing_manager.TracingConfig.configure_tracing" class="doc doc-heading">
<code class="highlight language-python"><span class="n">configure_tracing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.tempo.tracing_manager.TracingConfig.configure_tracing" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Abstract method to configure tracing based on the exporter.</p>
<p>Concrete implementations must provide their own configuration logic.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/tracing_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">configure_tracing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract method to configure tracing based on the exporter.</span>

<span class="sd">    Concrete implementations must provide their own configuration logic.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="otlptracingconfig">OTLPTracingConfig<a class="headerlink" href="#otlptracingconfig" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.tempo.tracing_manager.OTLPTracingConfig"></a>
    <div class="doc doc-contents first">

      <p>Concrete implementation of TracingConfig for OTLP exporter.</p>
<p>This class configures tracing using the OTLP exporter.</p>
<div class="admonition methods">
<p class="admonition-title">Methods</p>
<p>configure_tracing: Configures OpenTelemetry tracing with OTLP exporter.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/tracing_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">OTLPTracingConfig</span><span class="p">(</span><span class="n">TracingConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Concrete implementation of TracingConfig for OTLP exporter.</span>

<span class="sd">    This class configures tracing using the OTLP exporter.</span>

<span class="sd">    Methods:</span>
<span class="sd">        configure_tracing: Configures OpenTelemetry tracing with OTLP exporter.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">configure_tracing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configures tracing using the OTLP exporter.</span>

<span class="sd">        This method sets up OpenTelemetry Tracing with the OTLP exporter, including:</span>
<span class="sd">        - Setting the tracer provider with a resource that includes the service name.</span>
<span class="sd">        - Creating an OTLPSpanExporter and a BatchSpanProcessor.</span>
<span class="sd">        - Adding the span processor to the tracer provider.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Set up OpenTelemetry Tracing</span>
        <span class="n">set_tracer_provider</span><span class="p">(</span>
            <span class="n">TracerProvider</span><span class="p">(</span>
                <span class="n">resource</span><span class="o">=</span><span class="n">Resource</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="n">SERVICE_NAME</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_name</span><span class="p">})</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">tracer_provider</span> <span class="o">=</span> <span class="n">get_tracer_provider</span><span class="p">()</span>

        <span class="c1"># Configure OTLP exporter</span>
        <span class="n">exporter</span> <span class="o">=</span> <span class="n">OTLPSpanExporter</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">insecure</span><span class="p">)</span>
        <span class="n">span_processor</span> <span class="o">=</span> <span class="n">BatchSpanProcessor</span><span class="p">(</span><span class="n">exporter</span><span class="p">)</span>
        <span class="n">tracer_provider</span><span class="o">.</span><span class="n">add_span_processor</span><span class="p">(</span><span class="n">span_processor</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.tempo.tracing_manager.OTLPTracingConfig.configure_tracing" class="doc doc-heading">
<code class="highlight language-python"><span class="n">configure_tracing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.tempo.tracing_manager.OTLPTracingConfig.configure_tracing" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Configures tracing using the OTLP exporter.</p>
<p>This method sets up OpenTelemetry Tracing with the OTLP exporter, including:
- Setting the tracer provider with a resource that includes the service name.
- Creating an OTLPSpanExporter and a BatchSpanProcessor.
- Adding the span processor to the tracer provider.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/tracing_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">configure_tracing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configures tracing using the OTLP exporter.</span>

<span class="sd">    This method sets up OpenTelemetry Tracing with the OTLP exporter, including:</span>
<span class="sd">    - Setting the tracer provider with a resource that includes the service name.</span>
<span class="sd">    - Creating an OTLPSpanExporter and a BatchSpanProcessor.</span>
<span class="sd">    - Adding the span processor to the tracer provider.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Set up OpenTelemetry Tracing</span>
    <span class="n">set_tracer_provider</span><span class="p">(</span>
        <span class="n">TracerProvider</span><span class="p">(</span>
            <span class="n">resource</span><span class="o">=</span><span class="n">Resource</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="n">SERVICE_NAME</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_name</span><span class="p">})</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">tracer_provider</span> <span class="o">=</span> <span class="n">get_tracer_provider</span><span class="p">()</span>

    <span class="c1"># Configure OTLP exporter</span>
    <span class="n">exporter</span> <span class="o">=</span> <span class="n">OTLPSpanExporter</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">insecure</span><span class="p">)</span>
    <span class="n">span_processor</span> <span class="o">=</span> <span class="n">BatchSpanProcessor</span><span class="p">(</span><span class="n">exporter</span><span class="p">)</span>
    <span class="n">tracer_provider</span><span class="o">.</span><span class="n">add_span_processor</span><span class="p">(</span><span class="n">span_processor</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="jaegertracingconfig">JaegerTracingConfig<a class="headerlink" href="#jaegertracingconfig" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-class">

<a id="kal_utils.monitoring.tempo.tracing_manager.JaegerTracingConfig"></a>
    <div class="doc doc-contents first">

      <p>Concrete implementation of TracingConfig for Jaeger exporter.</p>
<p>This class configures tracing using the Jaeger exporter.</p>
<div class="admonition methods">
<p class="admonition-title">Methods</p>
<p>configure_tracing: Configures OpenTelemetry tracing with Jaeger exporter.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/tracing_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">JaegerTracingConfig</span><span class="p">(</span><span class="n">TracingConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Concrete implementation of TracingConfig for Jaeger exporter.</span>

<span class="sd">    This class configures tracing using the Jaeger exporter.</span>

<span class="sd">    Methods:</span>
<span class="sd">        configure_tracing: Configures OpenTelemetry tracing with Jaeger exporter.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">configure_tracing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configures tracing using the Jaeger exporter.</span>

<span class="sd">        This method sets up OpenTelemetry Tracing with the Jaeger exporter, including:</span>
<span class="sd">        - Setting the tracer provider with a resource that includes the service name.</span>
<span class="sd">        - Creating a JaegerExporter and a BatchSpanProcessor.</span>
<span class="sd">        - Adding the span processor to the tracer provider.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Set up OpenTelemetry Tracing</span>
        <span class="n">set_tracer_provider</span><span class="p">(</span>
            <span class="n">TracerProvider</span><span class="p">(</span>
                <span class="n">resource</span><span class="o">=</span><span class="n">Resource</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="n">SERVICE_NAME</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_name</span><span class="p">})</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">tracer_provider</span> <span class="o">=</span> <span class="n">get_tracer_provider</span><span class="p">()</span>

        <span class="c1"># Configure Jaeger exporter</span>
        <span class="n">exporter</span> <span class="o">=</span> <span class="n">JaegerExporter</span><span class="p">(</span><span class="n">agent_endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">)</span>
        <span class="n">span_processor</span> <span class="o">=</span> <span class="n">BatchSpanProcessor</span><span class="p">(</span><span class="n">exporter</span><span class="p">)</span>
        <span class="n">tracer_provider</span><span class="o">.</span><span class="n">add_span_processor</span><span class="p">(</span><span class="n">span_processor</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h2 id="kal_utils.monitoring.tempo.tracing_manager.JaegerTracingConfig.configure_tracing" class="doc doc-heading">
<code class="highlight language-python"><span class="n">configure_tracing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kal_utils.monitoring.tempo.tracing_manager.JaegerTracingConfig.configure_tracing" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Configures tracing using the Jaeger exporter.</p>
<p>This method sets up OpenTelemetry Tracing with the Jaeger exporter, including:
- Setting the tracer provider with a resource that includes the service name.
- Creating a JaegerExporter and a BatchSpanProcessor.
- Adding the span processor to the tracer provider.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/tracing_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">configure_tracing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configures tracing using the Jaeger exporter.</span>

<span class="sd">    This method sets up OpenTelemetry Tracing with the Jaeger exporter, including:</span>
<span class="sd">    - Setting the tracer provider with a resource that includes the service name.</span>
<span class="sd">    - Creating a JaegerExporter and a BatchSpanProcessor.</span>
<span class="sd">    - Adding the span processor to the tracer provider.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Set up OpenTelemetry Tracing</span>
    <span class="n">set_tracer_provider</span><span class="p">(</span>
        <span class="n">TracerProvider</span><span class="p">(</span>
            <span class="n">resource</span><span class="o">=</span><span class="n">Resource</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="n">SERVICE_NAME</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_name</span><span class="p">})</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">tracer_provider</span> <span class="o">=</span> <span class="n">get_tracer_provider</span><span class="p">()</span>

    <span class="c1"># Configure Jaeger exporter</span>
    <span class="n">exporter</span> <span class="o">=</span> <span class="n">JaegerExporter</span><span class="p">(</span><span class="n">agent_endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">)</span>
    <span class="n">span_processor</span> <span class="o">=</span> <span class="n">BatchSpanProcessor</span><span class="p">(</span><span class="n">exporter</span><span class="p">)</span>
    <span class="n">tracer_provider</span><span class="o">.</span><span class="n">add_span_processor</span><span class="p">(</span><span class="n">span_processor</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>

<h2 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">&para;</a></h2>
<h3 id="span_with_attributes">span_with_attributes<a class="headerlink" href="#span_with_attributes" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-function">

<a id="kal_utils.monitoring.tempo.context_manager.span_with_attributes"></a>
    <div class="doc doc-contents first">

      <p>Context manager for creating a span with specified attributes.</p>
<p>This context manager starts a new OpenTelemetry span with the given span name
and sets the provided attributes on that span. It ensures that the span is closed
after exiting the context.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>attributes</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of attributes to set on the span.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>span_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the span. Defaults to "custom-span".</p></td>
        <td><code>&#39;custom-span&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Span</code></td>
      <td><p>The created span with the given attributes set.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/context_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">span_with_attributes</span><span class="p">(</span><span class="n">attributes</span><span class="p">,</span> <span class="n">span_name</span><span class="o">=</span><span class="s2">&quot;custom-span&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context manager for creating a span with specified attributes.</span>

<span class="sd">    This context manager starts a new OpenTelemetry span with the given span name</span>
<span class="sd">    and sets the provided attributes on that span. It ensures that the span is closed</span>
<span class="sd">    after exiting the context.</span>

<span class="sd">    Args:</span>
<span class="sd">        attributes (dict): A dictionary of attributes to set on the span.</span>
<span class="sd">        span_name (str, optional): The name of the span. Defaults to &quot;custom-span&quot;.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Span: The created span with the given attributes set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tracer</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">get_tracer</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">tracer</span><span class="o">.</span><span class="n">start_as_current_span</span><span class="p">(</span><span class="n">span_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">span</span><span class="p">:</span>
        <span class="c1"># Set the specified attributes on the span</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">span</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="c1"># Yield the span to the context</span>
        <span class="k">yield</span> <span class="n">span</span>
</code></pre></div>
        </details>
    </div>

  </div>

<h3 id="span_with_event">span_with_event<a class="headerlink" href="#span_with_event" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-function">

<a id="kal_utils.monitoring.tempo.context_manager.span_with_event"></a>
    <div class="doc doc-contents first">

      <p>Context manager for adding an event with optional attributes to the current active span.</p>
<p>This context manager adds an event with the specified name and attributes to the current
active OpenTelemetry span. If no active span is available, it does nothing.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the event to add to the span.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>attributes</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>A dictionary of attributes to set on the event.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Span</code></td>
      <td><p>The current active span with the event and attributes added, or None if no span.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/context_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">span_with_event</span><span class="p">(</span><span class="n">event_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context manager for adding an event with optional attributes to the current active span.</span>

<span class="sd">    This context manager adds an event with the specified name and attributes to the current</span>
<span class="sd">    active OpenTelemetry span. If no active span is available, it does nothing.</span>

<span class="sd">    Args:</span>
<span class="sd">        event_name (str): The name of the event to add to the span.</span>
<span class="sd">        attributes (Optional[Dict[str, Any]]): A dictionary of attributes to set on the event.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Span: The current active span with the event and attributes added, or None if no span.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure you are using the correct tracer</span>
    <span class="n">tracer</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">get_tracer</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="c1"># Get the current active span</span>
    <span class="n">current_span</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">get_current_span</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">current_span</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">current_span</span><span class="o">.</span><span class="n">is_recording</span><span class="p">():</span>
        <span class="c1"># If no active span or span is not recording, do nothing</span>
        <span class="k">yield</span> <span class="kc">None</span>
        <span class="k">return</span>

    <span class="c1"># Add the event to the current span with optional attributes</span>
    <span class="n">current_span</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">event_name</span><span class="p">,</span> <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">)</span>

    <span class="c1"># Yield the current span with the event and attributes added</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">current_span</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c1"># If you want to clean up anything after the block ends</span>
</code></pre></div>
        </details>
    </div>

  </div>

<h3 id="add_span_attributes">add_span_attributes<a class="headerlink" href="#add_span_attributes" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-function">

<a id="kal_utils.monitoring.tempo.decorator_manager.add_span_attributes"></a>
    <div class="doc doc-contents first">

      <p>Decorator to add attributes to a span for a decorated asynchronous function.</p>
<p>This decorator creates a span for the decorated function and sets the specified
attributes on it. It also sets the span status to OK if the function executes
without errors, and to ERROR if an exception is raised.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>**attributes</code></td>
        <td></td>
        <td><p>Arbitrary keyword arguments representing the attributes
          to be set on the span. For example, <code>key1="value1"</code>.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>      

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/decorator_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_span_attributes</span><span class="p">(</span><span class="o">**</span><span class="n">attributes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decorator to add attributes to a span for a decorated asynchronous function.</span>

<span class="sd">    This decorator creates a span for the decorated function and sets the specified</span>
<span class="sd">    attributes on it. It also sets the span status to OK if the function executes</span>
<span class="sd">    without errors, and to ERROR if an exception is raised.</span>

<span class="sd">    Args:</span>
<span class="sd">        **attributes: Arbitrary keyword arguments representing the attributes</span>
<span class="sd">                      to be set on the span. For example, `key1=&quot;value1&quot;`.</span>

<span class="sd">    Returns:decorator</span>
<span class="sd">        function: The decorated asynchronous function with tracing.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">tracer</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">get_tracer</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="c1"># Create a new span with the function name</span>
            <span class="k">with</span> <span class="n">tracer</span><span class="o">.</span><span class="n">start_as_current_span</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="k">as</span> <span class="n">span</span><span class="p">:</span>
                <span class="c1"># Set static attributes</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="c1"># Handle dynamic attributes</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;{{&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;}}&quot;</span><span class="p">):</span>
                        <span class="c1"># Extract parameter name from `{{param_name}}`</span>
                        <span class="n">param_name</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;{{}}&quot;</span><span class="p">)</span>
                        <span class="c1"># Get the parameter value from kwargs</span>
                        <span class="c1"># if param_name in kwargs:</span>
                        <span class="n">span</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                        <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                        <span class="c1"># elif param_name in args:</span>
                        <span class="c1">#     span.set_attribute(key, args[param_name])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">span</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Call the decorated function</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                    <span class="c1"># Set span status to OK if no error occurs</span>
                    <span class="n">span</span><span class="o">.</span><span class="n">set_status</span><span class="p">(</span><span class="n">Status</span><span class="p">(</span><span class="n">StatusCode</span><span class="o">.</span><span class="n">OK</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">))</span>
                    <span class="k">return</span> <span class="n">result</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="c1"># Set span status to ERROR if an exception occurs</span>
                    <span class="n">span</span><span class="o">.</span><span class="n">set_status</span><span class="p">(</span><span class="n">Status</span><span class="p">(</span><span class="n">StatusCode</span><span class="o">.</span><span class="n">ERROR</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
                    <span class="c1"># Re-raise the exception to ensure proper error handling</span>
                    <span class="k">raise</span>

        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div>
        </details>
    </div>

  </div>

<h3 id="add_span_event">add_span_event<a class="headerlink" href="#add_span_event" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-function">

<a id="kal_utils.monitoring.tempo.decorator_manager.add_span_event"></a>
    <div class="doc doc-contents first">

      <p>Decorator to add an event to a span for a decorated asynchronous function.</p>
<p>This decorator creates a span for the decorated function and logs an event with
the specified name to that span. It does not modify the span status based on
the function execution outcome.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the event to be added to the span.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>function</code></td>
      <td><p>The decorated asynchronous function with tracing.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/tempo/decorator_manager.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_span_event</span><span class="p">(</span><span class="n">event_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decorator to add an event to a span for a decorated asynchronous function.</span>

<span class="sd">    This decorator creates a span for the decorated function and logs an event with</span>
<span class="sd">    the specified name to that span. It does not modify the span status based on</span>
<span class="sd">    the function execution outcome.</span>

<span class="sd">    Args:</span>
<span class="sd">        event_name (str): The name of the event to be added to the span.</span>

<span class="sd">    Returns:</span>
<span class="sd">        function: The decorated asynchronous function with tracing.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">tracer</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">get_tracer</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">tracer</span><span class="o">.</span><span class="n">start_as_current_span</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="k">as</span> <span class="n">span</span><span class="p">:</span>
                <span class="n">span</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">event_name</span><span class="p">)</span>
                <span class="k">return</span> <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div>
        </details>
    </div>

  </div>

<h3 id="configure_monitor">configure_monitor<a class="headerlink" href="#configure_monitor" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-function">

<a id="kal_utils.monitoring.core.config_metrics.configure_monitor"></a>
    <div class="doc doc-contents first">


        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/config_metrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">configure_monitor</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">):</span>
    <span class="n">UnifiedMetrics</span> <span class="o">=</span> <span class="n">create_unified_metrics_class</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="n">UnifiedMetrics</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span><span class="n">BaseHTTPMiddleware</span><span class="p">,</span> <span class="n">dispatch</span><span class="o">=</span><span class="n">metrics</span><span class="o">.</span><span class="n">dispatch</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">metrics</span>
</code></pre></div>
        </details>
    </div>

  </div>

<h3 id="get_enabled_metrics">get_enabled_metrics<a class="headerlink" href="#get_enabled_metrics" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-function">

<a id="kal_utils.monitoring.core.metrics.get_enabled_metrics"></a>
    <div class="doc doc-contents first">

      <p>Retrieves the enabled metrics classes from environment variables.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/metrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_enabled_metrics</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the enabled metrics classes from environment variables.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">enabled_metrics</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;ENABLED_METRICS&#39;</span><span class="p">,</span> <span class="s1">&#39;RequestCounter,RequestHist,ServerErrorMetrics&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">enabled_metrics</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>

<h3 id="get_metrics_classes">get_metrics_classes<a class="headerlink" href="#get_metrics_classes" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-function">

<a id="kal_utils.monitoring.core.metrics.get_metrics_classes"></a>
    <div class="doc doc-contents first">

      <p>Dynamically load and return a dictionary of available metrics classes.</p>

        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/core/metrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_metrics_classes</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically load and return a dictionary of available metrics classes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">prometheus</span>
    <span class="n">metrics_classes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;LocationRequestCounter&quot;</span><span class="p">:</span><span class="n">prometheus</span><span class="o">.</span><span class="n">locationRequestCounter</span><span class="o">.</span><span class="n">LocationRequestCounter</span><span class="p">,</span>
        <span class="s2">&quot;RequestCounter&quot;</span><span class="p">:</span><span class="n">prometheus</span><span class="o">.</span><span class="n">requestMetrics</span><span class="o">.</span><span class="n">RequestCounter</span><span class="p">,</span>
        <span class="s2">&quot;RequestHist&quot;</span><span class="p">:</span><span class="n">prometheus</span><span class="o">.</span><span class="n">requestMetrics</span><span class="o">.</span><span class="n">RequestHist</span><span class="p">,</span>
        <span class="s2">&quot;ServerErrorMetrics&quot;</span><span class="p">:</span><span class="n">prometheus</span><span class="o">.</span><span class="n">requestMetrics</span><span class="o">.</span><span class="n">ServerErrorMetrics</span><span class="p">,</span>
        <span class="s2">&quot;CpuUsageMonitor&quot;</span><span class="p">:</span><span class="n">prometheus</span><span class="o">.</span><span class="n">systemMetrics</span><span class="o">.</span><span class="n">CpuUsageMonitor</span><span class="p">,</span>
        <span class="s2">&quot;MemoryUsageMonitor&quot;</span><span class="p">:</span><span class="n">prometheus</span><span class="o">.</span><span class="n">systemMetrics</span><span class="o">.</span><span class="n">MemoryUsageMonitor</span><span class="p">,</span>
        <span class="s2">&quot;DiskUsageMonitor&quot;</span><span class="p">:</span><span class="n">prometheus</span><span class="o">.</span><span class="n">systemMetrics</span><span class="o">.</span><span class="n">DiskUsageMonitor</span><span class="p">,</span>
        <span class="s2">&quot;NetworkUsageMonitor&quot;</span><span class="p">:</span><span class="n">prometheus</span><span class="o">.</span><span class="n">systemMetrics</span><span class="o">.</span><span class="n">NetworkUsageMonitor</span>
    <span class="p">}</span>
    <span class="c1"># base_directory = &#39;prometheus&#39;</span>
    <span class="c1"># base_module = &#39;prometheus&#39;</span>

    <span class="c1"># # Find all modules in the base directory</span>
    <span class="c1"># modules = find_modules_in_directory(base_directory)</span>
    <span class="c1"># metrics_classes = {}</span>

    <span class="c1"># # Iterate over modules to find and filter classes</span>
    <span class="c1"># for module_name, module_path in modules.items():</span>
    <span class="c1">#     classes = find_classes_in_module(module_path)</span>
    <span class="c1">#     filtered_classes = filter_metric_classes(classes, base_module)</span>
    <span class="c1">#     metrics_classes.update(filtered_classes)</span>

    <span class="k">return</span> <span class="n">metrics_classes</span>
</code></pre></div>
        </details>
    </div>

  </div>

<h3 id="create_unified_metrics_class">create_unified_metrics_class<a class="headerlink" href="#create_unified_metrics_class" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-function">

<a id="kal_utils.monitoring.prometheus.unifiedMetrics.create_unified_metrics_class"></a>
    <div class="doc doc-contents first">

      <p>Creates a unified metrics class based on the metrics enabled via environment variables.</p>
<p>This function constructs a <code>UnifiedMetrics</code> class, which combines multiple metrics classes
into a single interface for managing metrics. The metrics classes to be included are determined
by the <code>ENABLED_METRICS</code> environment variable.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>app</code></td>
        <td><code>FastAPI</code></td>
        <td><p>The FastAPI application instance. This is used to initialize each metric class.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Type[PrometheusMetricsDecorator]</code></td>
      <td><p>A subclass of <code>PrometheusMetricsDecorator</code> with the
combined functionality of all enabled metrics classes.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/prometheus/unifiedMetrics.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_unified_metrics_class</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">PrometheusMetricsDecorator</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unified metrics class based on the metrics enabled via environment variables.</span>

<span class="sd">    This function constructs a `UnifiedMetrics` class, which combines multiple metrics classes</span>
<span class="sd">    into a single interface for managing metrics. The metrics classes to be included are determined</span>
<span class="sd">    by the `ENABLED_METRICS` environment variable.</span>

<span class="sd">    Args:</span>
<span class="sd">        app (FastAPI): The FastAPI application instance. This is used to initialize each metric class.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Type[PrometheusMetricsDecorator]: A subclass of `PrometheusMetricsDecorator` with the</span>
<span class="sd">        combined functionality of all enabled metrics classes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">metrics_classes</span> <span class="o">=</span> <span class="n">get_metrics_classes</span><span class="p">()</span>
    <span class="n">enabled_metrics</span> <span class="o">=</span> <span class="n">get_enabled_metrics</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">UnifiedMetrics</span><span class="p">(</span><span class="n">PrometheusMetricsDecorator</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A unified metrics class that integrates multiple metrics classes into a single interface.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            metrics_initialized (Set[PrometheusMetricsDecorator]): A set of initialized metrics instances</span>
<span class="sd">            that are active for this application.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Initializes the UnifiedMetrics class.</span>

<span class="sd">            This constructor sets up metrics by initializing the metrics classes that are enabled,</span>
<span class="sd">            as determined by the environment variables.</span>

<span class="sd">            Args:</span>
<span class="sd">                app (FastAPI): The FastAPI application instance used to initialize each metric class.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metrics_initialized</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">PrometheusMetricsDecorator</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initialize_metrics</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">metrics_classes</span><span class="p">,</span> <span class="n">enabled_metrics</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">initialize_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">metrics_classes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">enabled_metrics</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Initializes metrics instances based on the enabled metrics classes.</span>

<span class="sd">            This method checks the enabled metrics and creates instances of the corresponding</span>
<span class="sd">            metrics classes. Each initialized metric instance is added to the `metrics_initialized`</span>
<span class="sd">            set to ensure that each metric is only initialized once.</span>

<span class="sd">            Args:</span>
<span class="sd">                app (FastAPI): The FastAPI application instance used for initializing each metric class.</span>
<span class="sd">                metrics_classes (dict): A dictionary mapping metric class names to their corresponding</span>
<span class="sd">                metric classes.</span>
<span class="sd">                enabled_metrics (Set[str]): A set of names for the metrics classes that are enabled</span>
<span class="sd">                according to the environment variables.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">metric_class_name</span> <span class="ow">in</span> <span class="n">enabled_metrics</span><span class="p">:</span>
                <span class="n">metric_class</span> <span class="o">=</span> <span class="n">metrics_classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">metric_class_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">metric_class</span><span class="p">:</span>
                    <span class="n">metric_instance</span> <span class="o">=</span> <span class="n">metric_class</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
                    <span class="c1"># Initialize metrics if not already done</span>
                    <span class="k">if</span> <span class="n">metric_instance</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics_initialized</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">metrics_initialized</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">metric_instance</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">setup_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Sets up metrics for all enabled metrics classes.</span>

<span class="sd">            This method is currently a placeholder and does not perform any actions. It is intended</span>
<span class="sd">            to be used for additional setup if needed in the future. The actual setup is performed</span>
<span class="sd">            by individual metric classes during their initialization.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">pass</span>

        <span class="k">async</span> <span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">call_next</span><span class="p">):</span>
            <span class="c1"># Define the path to exclude from metrics collection</span>
            <span class="n">excluded_paths</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;/metrics&quot;</span><span class="p">]</span>  <span class="c1"># Add other paths to exclude as needed</span>

            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span> <span class="ow">in</span> <span class="n">excluded_paths</span><span class="p">:</span>
                <span class="c1"># Skip metrics collection for excluded paths</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_metrics</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">response</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">before_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">call_next</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">after_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">response</span>

        <span class="k">def</span> <span class="nf">before_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Invokes the `before_request` method for all initialized metrics classes.</span>

<span class="sd">            This method is called before processing each request. It allows each metrics instance</span>
<span class="sd">            to perform any necessary actions or preparations before the request is handled.</span>

<span class="sd">            Args:</span>
<span class="sd">                request (Request): The incoming HTTP request object.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">metric_instance</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics_initialized</span><span class="p">:</span>
                <span class="n">metric_instance</span><span class="o">.</span><span class="n">before_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Invokes the `after_request` method for all initialized metrics classes.</span>

<span class="sd">            This method is called after processing each request. It allows each metrics instance</span>
<span class="sd">            to perform any necessary actions or updates based on the request and response.</span>

<span class="sd">            Args:</span>
<span class="sd">                request (Request): The incoming HTTP request object.</span>
<span class="sd">                response (Any): The HTTP response object.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">metric_instance</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics_initialized</span><span class="p">:</span>
                <span class="n">metric_instance</span><span class="o">.</span><span class="n">after_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">update_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Invokes the `after_request` method for all initialized metrics classes.</span>

<span class="sd">            This method is called after processing each request. It allows each metrics instance</span>
<span class="sd">            to perform any necessary actions or updates based on the request and response.</span>

<span class="sd">            Args:</span>
<span class="sd">                request (Request): The incoming HTTP request object.</span>
<span class="sd">                response (Any): The HTTP response object.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">metric_instance</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics_initialized</span><span class="p">:</span>
                <span class="n">metric_instance</span><span class="o">.</span><span class="n">update_metrics</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">UnifiedMetrics</span>
</code></pre></div>
        </details>
    </div>

  </div>

<h3 id="authenticate">authenticate<a class="headerlink" href="#authenticate" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-function">

<a id="kal_utils.monitoring.utils.basic_authentication.authenticate"></a>
    <div class="doc doc-contents first">


        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/utils/basic_authentication.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="n">credentials</span><span class="p">:</span> <span class="n">HTTPBasicCredentials</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">security</span><span class="p">)):</span>
    <span class="n">correct_username</span> <span class="o">=</span> <span class="s2">&quot;prometheus&quot;</span> <span class="c1"># TODO: Replace Hardcoded</span>
    <span class="n">correct_password</span> <span class="o">=</span> <span class="s2">&quot;prometheus&quot;</span>
    <span class="k">if</span> <span class="n">credentials</span><span class="o">.</span><span class="n">username</span> <span class="o">!=</span> <span class="n">correct_username</span> <span class="ow">or</span> <span class="n">credentials</span><span class="o">.</span><span class="n">password</span> <span class="o">!=</span> <span class="n">correct_password</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_401_UNAUTHORIZED</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Invalid authentication credentials&quot;</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;WWW-Authenticate&quot;</span><span class="p">:</span> <span class="s2">&quot;Basic&quot;</span><span class="p">},</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>

<h3 id="add_parent_directory_to_sys_path">add_parent_directory_to_sys_path<a class="headerlink" href="#add_parent_directory_to_sys_path" title="Permanent link">&para;</a></h3>


  <div class="doc doc-object doc-function">

<a id="kal_utils.monitoring.utils.relative_imports.add_parent_directory_to_sys_path"></a>
    <div class="doc doc-contents first">

      <p>Adds a directory <code>levels_up</code> levels above the current file to the sys.path.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>levels_up</code></td>
        <td><code>int</code></td>
        <td><p>The number of directory levels to go up from the current file.
             Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kal_utils/monitoring/utils/relative_imports.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_parent_directory_to_sys_path</span><span class="p">(</span><span class="n">levels_up</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a directory `levels_up` levels above the current file to the sys.path.</span>

<span class="sd">    Args:</span>
<span class="sd">        levels_up (int): The number of directory levels to go up from the current file.</span>
<span class="sd">                         Defaults to 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">current_file_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>  <span class="c1"># Directory of the current file</span>
    <span class="n">target_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">current_file_directory</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="s2">&quot;..&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">levels_up</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">target_directory</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">target_directory</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-10-14T09:09:57+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-10-14</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-10-13T18:25:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-10-13</span>
  </span>

    
    
    
  </aside>





                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 - 2024 Bar Lander
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.525ec568.min.js"></script>
      
        <script src="../js/timeago.min.js"></script>
      
        <script src="../js/timeago_mkdocs_material.js"></script>
      
    
  </body>
</html>